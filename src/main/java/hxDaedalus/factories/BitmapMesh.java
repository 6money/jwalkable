// Generated by Haxe 3.4.2
package hxDaedalus.factories;

import haxe.root.*;

@SuppressWarnings(value={"rawtypes", "unchecked"})
public class BitmapMesh extends haxe.lang.HxObject
{
	public BitmapMesh(haxe.lang.EmptyObject empty)
	{
	}
	
	
	public BitmapMesh()
	{
		//line 54 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/factories/BitmapMesh.hx"
		hxDaedalus.factories.BitmapMesh.__hx_ctor_hxDaedalus_factories_BitmapMesh(this);
	}
	
	
	public static void __hx_ctor_hxDaedalus_factories_BitmapMesh(hxDaedalus.factories.BitmapMesh __hx_this)
	{
	}
	
	
	public static hxDaedalus.data.Mesh buildFromBmpData(hxPixels._Pixels.PixelsData bmpData, hxPixels._Pixels.PixelsData debugBmp, wings.javaSwing.SimpleDrawingContext debugShape)
	{
		//line 25 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/factories/BitmapMesh.hx"
		int i = 0;
		//line 26 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/factories/BitmapMesh.hx"
		int j = 0;
		//line 29 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/factories/BitmapMesh.hx"
		haxe.root.Array<haxe.root.Array<java.lang.Object>> shapes = hxDaedalus.data.math.Potrace.buildShapes(bmpData, debugBmp, debugShape);
		//line 31 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/factories/BitmapMesh.hx"
		haxe.root.Array<hxDaedalus.data.graph.Graph> graphs = new haxe.root.Array<hxDaedalus.data.graph.Graph>();
		//line 32 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/factories/BitmapMesh.hx"
		{
			//line 32 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/factories/BitmapMesh.hx"
			int _g1 = 0;
			//line 32 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/factories/BitmapMesh.hx"
			int _g = shapes.length;
			//line 32 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/factories/BitmapMesh.hx"
			while (( _g1 < _g ))
			{
				//line 32 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/factories/BitmapMesh.hx"
				int i1 = _g1++;
				//line 33 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/factories/BitmapMesh.hx"
				graphs.push(hxDaedalus.data.math.Potrace.buildGraph(shapes.__get(i1)));
			}
			
		}
		
		//line 37 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/factories/BitmapMesh.hx"
		haxe.root.Array<haxe.root.Array<java.lang.Object>> polygons = new haxe.root.Array<haxe.root.Array<java.lang.Object>>();
		//line 38 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/factories/BitmapMesh.hx"
		{
			//line 38 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/factories/BitmapMesh.hx"
			int _g11 = 0;
			//line 38 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/factories/BitmapMesh.hx"
			int _g2 = graphs.length;
			//line 38 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/factories/BitmapMesh.hx"
			while (( _g11 < _g2 ))
			{
				//line 38 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/factories/BitmapMesh.hx"
				int i2 = _g11++;
				//line 39 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/factories/BitmapMesh.hx"
				polygons.push(hxDaedalus.data.math.Potrace.buildPolygon(graphs.__get(i2), debugShape));
			}
			
		}
		
		//line 42 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/factories/BitmapMesh.hx"
		hxDaedalus.data.Mesh mesh = hxDaedalus.factories.RectMesh.buildRectangle(((double) (bmpData.width) ), ((double) (bmpData.height) ));
		//line 43 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/factories/BitmapMesh.hx"
		{
			//line 43 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/factories/BitmapMesh.hx"
			int _g12 = 0;
			//line 43 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/factories/BitmapMesh.hx"
			int _g3 = polygons.length;
			//line 43 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/factories/BitmapMesh.hx"
			while (( _g12 < _g3 ))
			{
				//line 43 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/factories/BitmapMesh.hx"
				int i3 = _g12++;
				//line 44 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/factories/BitmapMesh.hx"
				j = 0;
				//line 45 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/factories/BitmapMesh.hx"
				while (( j < ( polygons.__get(i3).length - 2 ) ))
				{
					//line 46 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/factories/BitmapMesh.hx"
					mesh.insertConstraintSegment(((double) (haxe.lang.Runtime.toDouble(polygons.__get(i3).__get(j))) ), ((double) (haxe.lang.Runtime.toDouble(polygons.__get(i3).__get(( j + 1 )))) ), ((double) (haxe.lang.Runtime.toDouble(polygons.__get(i3).__get(( j + 2 )))) ), ((double) (haxe.lang.Runtime.toDouble(polygons.__get(i3).__get(( j + 3 )))) ));
					//line 47 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/factories/BitmapMesh.hx"
					j += 2;
				}
				
				//line 49 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/factories/BitmapMesh.hx"
				mesh.insertConstraintSegment(((double) (haxe.lang.Runtime.toDouble(polygons.__get(i3).__get(0))) ), ((double) (haxe.lang.Runtime.toDouble(polygons.__get(i3).__get(1))) ), ((double) (haxe.lang.Runtime.toDouble(polygons.__get(i3).__get(j))) ), ((double) (haxe.lang.Runtime.toDouble(polygons.__get(i3).__get(( j + 1 )))) ));
			}
			
		}
		
		//line 51 "/Users/tao/projects/hxDaedalus/src/hxDaedalus/factories/BitmapMesh.hx"
		return mesh;
	}
	
	
}


